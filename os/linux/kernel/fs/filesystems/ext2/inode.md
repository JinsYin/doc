# Ext2 inode

## 数据结构

![Ext2 inode](.images/ext2-inode.svg)

* 文件系统块的大小可以是 1KB、2KB 或 4KB
  * `mkfs` 命令创建文件系统时可以指定逻辑块的大小
* 每个 inode 包含 15 个指针
  * 前 12 个指针：直接指向文件的前 12 个数据块
  * 第 13 个指针：指向指针块，包含文件的第 13 个以及后续数据块的位置；符号大小文件
  * 第 14 个指针：一个双重间接指针 —— 指向多个指针块，最终由指针块中的指针指向文件的数据块；符合巨型文件的需求
  * 第 15 个指针：一个三重间接指针；符合超巨型文件


指针块中指针的数量取决于文件系统块的大小，每个指针需占用 **4** 个字节，因此指针块中指针的数量在 256 ~ 1024 之间。

如果文件系统块大小为 4KB，理论上，文件大小可略高于 1024 * 1024 * 1024 * 4096 字节，即 4TB（指针占 4 个字节）。之所以说 “略高于”，是因为前面是按三重间接指针指向的范围来计算的，没有考虑其他相对而言微不足道的直接、间接、双重间接指针指向的范围。

## 示例
