# ext2

ext2 是为 Linux 内核设计的第二代扩展文件系统（second extended file system），也是第一个商业级的 Linux 文件系统

## 简介

* 时间：1993 年 1 月
* 设计者：Rémy Card
* 设计目的：取代 ext

## 数据结构

### inode

每个文件由 inode（来源：“index node” -> “i-node” -> “inode”）来表示

![Ext2 inode](.images/ext2-inode.svg)

* 在 ext2 文件系统中，逻辑块的大小为 1KB、2KB 或 4KB
* 在 ext2 文件系统中，每个 inode 包含 15 个指针
  * 前 12 个指针直接指向文件的前 12 个数据块
  * 第 13 个指针指向指针块，包含文件的第 13 个以及后续数据块的位置；指针块中指针的数量取决于文件系统中块的大小，每个指针占用 4 个字节，因此指针的数量在 256 ~ 1024 之间，这符合大型文件的需求
  * 第 14 个指针是一个双重间接指针 —— 指向多个指针块，最终由指针块中的指针指向文件的数据块，这符合巨型文件的需求
  * 第 15 个指针是一个三重间接指针

## 大小限制

| 块大小  | 最大文件大小 | 最大文件系统大小 |
| ------- | ------------ | ---------------- |
| **1KB** | 16GB         | 4TB              |
| **2KB** | 256GB        | 8TB              |
| **4KB** | 2TB          | 16TB             |
| **8KB** | 2TB          | 32TB             |

解读：在 ext2 文件系统中，当逻辑块的大小为 1KB 时，文件最大可以是 16GB，而文件系统最大可以是 4TB ，