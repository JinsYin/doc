# 进程优先级

并非所有进程都具有相同的重要性。除了进程优先级外，进程还有不同的关键度类别，以满足不同需求。

## 实时进程

* 硬实时进程有严格的时间限制，任务必须在可保证的时间范围内得到处理，但并不意味着所要求的时间范围特别短，而是不能超过某一时间范围；Linux 不支持硬实时处理
* 软实时进程是硬实时进程的一种弱化形式，即使稍微晚一点问题也不大
* 大多数进程是没有特定时间约束的普通进程，但仍然可以根据重要性来分配优先级

## 抢占式多任务处理（preemptive multitasking）

进程的运行按时间片调度，分配给进程的时间片份额与其相对重要性相当。

* 各个进程都分配到一定的时间段可以执行。时间段到期后，内核会从进程收回控制权，让不同的进程运行
* 被抢占进程的运行时环境，即所有 CPU 寄存器的数据和页表都会保存起来，保证其执行结果不会丢失。在该进程恢复执行时，该进程环境可以完全恢复
* 时间片的长度会根据进程重要性（以及因此而分配的优先级）的不同而变化

内核的抢占调度模型建立了一个层次结构，用于判断哪些进程状态可以由其他状态抢占：

* 普通进程总是可能被抢占
* 系统处于内核态并正在处理系统调用时，系统中的其他进程无法抢占其 CPU 时间。调度器必须等待系统调用执行结束，才能执行另一个进程，不过中断可以中止系统调用
* 中断可以暂停处于用户态和内核态的进程。中断具有最高优先级，因为在中断触发后需要尽快处理