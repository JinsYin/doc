# NFS

NFS 是 Network File System 的缩写，即网络文件系统。

NFS 最大的问题在于权限问题：因为在客户端与服务器端可能必须要具备相同的账号才能读写某些目录或档案。另外，NFS 的启动之前需要先启动 RPC （远程过程调用）。NFS 默认启动在 `2049` 端口，但是由于文件系统非常复杂，因此 NFS 还有其他的程序去启动额外的端口；`rpc` 使用 `111` 端口监听客户端的需求并反馈给客户端正确的端口。

## 流程分析

客户端如何向服务器端请求读写文件：

1. 客户端会向服务器端的 RPC（端口 111）发出 NFS 文件存取功能的询问要求
2. 服务器端找到对应的已注册的 NFS daemon 端口后，会响应给客户端
3. 客户端获取正确的端口后，就可以直接与 NFS daemon 来连接

## 常用目录

| 目录路径            | 目录说明                              |
| ------------------- | ------------------------------------- |
| /etc/exports        | NFS服务的主要配置文件                 |
| /usr/sbin/exportfs  | NFS服务的管理命令                     |
| /usr/sbin/showmount | 客户端的查看命令                      |
| /var/lib/nfs/etab   | 记录NFS分享出来的目录的完整权限设定值 |
| /var/lib/nfs/xtab   | 记录曾经登录过的客户端信息            |