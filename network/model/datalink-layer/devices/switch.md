# 交换机

交换机是一种能把网络包的 MAC 头拿下来，检查一下目标 MAC 地址，然后根据策略转发的网络设备。

交换机可以接几十、上百台机器。

## 交换机学习过程

交换机通过学习，可以知道端口所连接的设备的 MAC 地址，学习以后不用再像集线器一样完全靠广播。

1. PC1（假设连接交换机的 P1 口）向 PC2 发送网络包（如果不知道目标 MAC 地址同样需要 ARP 广播）
2. 网络包到达交换机，交换机并不知道 PC2 连接的是哪个端口，所以会将包转发到除 P1 以外的其他所有端口
3. 交换机会记住 PC1 来自哪个明确的口（这里是 P1 口），以后有目的地址是 PC1 的包就直接发送到 P1 口
4. 一段时间后，交换机便有了整个网络的结构（学习的结果称为 `转发表`），不用广播便可以全部准确转发
5. 机器的 IP 地址可能会变，连接的端口也可能会变，因此转发表有一个过期时间

## 类别

* 二层交换机（L2 Switch）
* 三层交换机（L3 Switch） - 相当于多口路由器，但还支持 VLAN 等技术。