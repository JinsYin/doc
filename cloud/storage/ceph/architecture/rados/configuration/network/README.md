# 网络配置

```c
                              +-------------+
                              | Ceph Client |
                              +-------------+
                                    |  ^
                           Request  |  | Response
                                    v  |
+--------------------------------------------------------------------------+
|                              Public Network                              |
+--------------------------------------------------------------------------+
    ^  ^            ^  ^            ^  ^            ^  ^            ^  ^
    |  |            |  |            |  |            |  |            |  |
    |  |            |  |            |  |            |  |            |  |
    v  v            v  v            v  v            v  v            v  v
+----------+    +----------+    +----------+    +----------+    +----------+
| Ceph Mon |    | Ceph MDS |    | Ceph OSD |    | Ceph OSD |    | Ceph OSD |
+----------+    +----------+    +----------+    +----------+    +----------+
                                    ^  ^            ^  ^            ^  ^
                                    |  |            |  |            |  |
                                    |  |            |  |            |  |
                                    v  v            v  v            v  v
+--------------------------------------------------------------------------+
|                             Cluster Network                              |
+--------------------------------------------------------------------------+
```

## IP 表

## 配置选项

必须专门配置集群网络，否则 Ceph 会假定所有主机都运行在公共网络上。

* Public Network

| 配置选项         | 描述 | 类型 | 必需？ | 默认值 |
| ---------------- | ---- | ---- | ------ | ------ |
| `public network` |      |      |        |        |
| `public addr`    |      |      |        |        |

* Cluster Network

| 配置选项          | 描述 | 类型 | 必需？ | 默认值 |
| ----------------- | ---- | ---- | ------ | ------ |
| `cluster network` |      |      |        |        |
| `cluster addr`    |      |      |        |        |

* BIND

| 配置选项           | 描述 | 类型 | 必需？ | 默认值 |
| ------------------ | ---- | ---- | ------ | ------ |
| `ms bind port min` |      |      |        |        |
| `ms bind port max` |      |      |        |        |
| `ms bind ipv6`     |      |      |        |        |
| `public bind addr` |      |      |        |        |

* TCP

| 配置选项              | 描述 | 类型 | 必需？ | 默认值 |
| --------------------- | ---- | ---- | ------ | ------ |
| `ms tcp nodelay`      |      |      |        |        |
| `ms tcp rcvbuf`       |      |      |        |        |
| `ms tcp read timeout` |      |      |        |        |

## 参考

* [NETWORK CONFIGURATION REFERENCE](http://docs.ceph.com/docs/master/rados/configuration/network-config-ref/)
